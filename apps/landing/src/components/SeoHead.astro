---
interface Props {
    title: string;
    description: string;
    type?: "SoftwareApplication" | "WebPage";
    url?: string;
}

const { title, description, type = "WebPage", url } = Astro.props;

const resolvedUrl =
    url ?? (Astro.site ? new URL(Astro.url.pathname, Astro.site).toString() : undefined);

const jsonLd = {
    "@context": "https://schema.org",
    "@type": type,
    name: title,
    description,
    ...(resolvedUrl ? { url: resolvedUrl } : {}),
    ...(type === "SoftwareApplication"
        ? {
              applicationCategory: "DeveloperApplication",
              operatingSystem: "Web",
              offers: {
                  "@type": "Offer",
                  price: "0",
                  priceCurrency: "USD",
              },
          }
        : {}),
};
---

<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
